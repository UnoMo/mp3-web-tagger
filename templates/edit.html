{% extends "base.html" %}
{% block content %}

<div class="card">
  <div style="display:flex;flex-wrap:wrap;justify-content:space-between;align-items:flex-start;gap:.5rem;">
    <div>
      <h2 style="margin-top:0;">Edit tags — {{ filename }}</h2>
      {% if common.title or common.artist %}
        <div class="muted">
          {% if common.title %}<strong>{{ common.title }}</strong>{% endif %}
          {% if common.artist %} — {{ common.artist }}{% endif %}
        </div>
      {% endif %}
    </div>

    <div class="actions" style="text-align:right;display:flex;flex-wrap:wrap;gap:.5rem;">
      <a class="btn" href="{{ url_for('explore') }}">← Explore</a>

      {% if prev_name %}
        <a class="btn" href="{{ url_for('edit', filename=prev_name) }}">&laquo; Prev</a>
      {% else %}
        <span class="btn" style="opacity:.4;cursor:default;">&laquo; Prev</span>
      {% endif %}

      {% if next_name %}
        <a class="btn" href="{{ url_for('edit', filename=next_name) }}">Next &raquo;</a>
      {% else %}
        <span class="btn" style="opacity:.4;cursor:default;">Next &raquo;</span>
      {% endif %}
    </div>
  </div>

  <form action="{{ url_for('update', filename=filename) }}" method="post">
</div>

<div class="row">
  <div class="card">
    <h3>Front cover</h3>
    {% if cover_front %}
      <img class="cover" src="{{ cover_front.data_url }}" alt="Front cover">
    {% else %}
      <p class="muted">No front cover embedded.</p>
    {% endif %}
    <form action="{{ url_for('add_cover', filename=filename) }}" method="post" enctype="multipart/form-data">
      <input type="hidden" name="kind" value="front">
      <label>Replace / Add (JPG/PNG/GIF/WEBP/BMP)</label>
      <input type="file" name="image" accept=".jpg,.jpeg,.png,.gif,.webp,.bmp">
      <div class="actions" style="margin-top:.6rem">
        <button class="btn" type="submit">Update front cover</button>
      </div>
    </form>
    <form class="inline" action="{{ url_for('remove_cover_route', filename=filename) }}" method="post">
      <input type="hidden" name="kind" value="front">
      <button class="btn" type="submit">Remove front</button>
    </form>
  </div>

  <div class="card">
    <h3>Back cover</h3>
    {% if cover_back %}
      <img class="cover" src="{{ cover_back.data_url }}" alt="Back cover">
    {% else %}
      <p class="muted">No back cover embedded.</p>
    {% endif %}
    <form action="{{ url_for('add_cover', filename=filename) }}" method="post" enctype="multipart/form-data">
      <input type="hidden" name="kind" value="back">
      <label>Replace / Add (JPG/PNG/GIF/WEBP/BMP)</label>
      <input type="file" name="image" accept=".jpg,.jpeg,.png,.gif,.webp,.bmp">
      <div class="actions" style="margin-top:.6rem">
        <button class="btn" type="submit">Update back cover</button>
      </div>
    </form>
    <form class="inline" action="{{ url_for('remove_cover_route', filename=filename) }}" method="post">
      <input type="hidden" name="kind" value="back">
      <button class="btn" type="submit">Remove back</button>
    </form>
  </div>
</div>

<div class="card">
  <h3>Remove all covers</h3>
  <form class="inline" action="{{ url_for('remove_cover_route', filename=filename) }}" method="post">
    <input type="hidden" name="kind" value="all">
    <button class="btn" type="submit">Remove all</button>
  </form>
</div>

{% endblock %}
